{"version":3,"file":"static/webpack/static/development/pages/showinfo.js.d23e195f071a92fb6ffb.hot-update.js","sources":["webpack:///./pages/showinfo.js"],"sourcesContent":["import React, {Component} from 'react';\nimport Head from \"next/head\";\nimport { Card, Segment, Table} from \"semantic-ui-react\";\nimport FixedMenuLayout from \"../components/footer\";\nimport instance from \"../components/verifier.js\";\nimport web3 from '../components/web3.js';\n\nclass ShowInfo extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            loading: false,\n            accounts: [],\n            jobs: [],\n            certificates: [],\n            info: null\n        };\n    }\n\n    componentWillMount() {\n        this.loadBlockchainData()\n    }\n\n    //calls the contract functions before the page is rendered(getBasicInfo, getJobCount, getJob )\n    async loadBlockchainData() {\n        this.setState({loading: await web3.eth.isMining()});\n        this.setState({accounts: await web3.eth.getAccounts()});\n        const x = await instance.methods.getBasicInfo(this.state.accounts[0]).call();\n        this.setState({\n            info: x\n        });\n        const y = await instance.methods.getJobCount(this.state.accounts[0]).call();\n            for (let i = 0; i < y; i++) {\n                const z = await instance.methods.getJob(this.state.accounts[0], i).call();\n                this.setState({jobs: [...this.state.jobs, z]});\n            }\n\n        const z = await instance.methods.getCertificateCount(this.state.accounts[0]).call();\n        for (let i = 0; i < z; i++) {\n            const r = await instance.methods.getCertificate(this.state.accounts[0], i).call();\n            this.setState({certificates: [...this.state.certificates, r]});\n        }\n    }\n\n    //renders the certificates of an user in table rows\n    renderCertificates() {\n        const x = this.state.accounts[0];\n        let y = 'Unknown';\n        let r = this.state.certificates.map(function (certificate) {\n            if (certificate[3] === false && certificate[4] === false) {\n                y = 'Unknown'\n            } else if (certificate[3] === true) {\n                y = 'Approved'\n            } else if (certificate[4] === true) {\n                y = 'Denied'\n            }\n            return [<Table.Row positive={certificate[3]} negative={!certificate[3]}>\n                <Table.Cell key={x}>{certificate[1].toString()}</Table.Cell>\n                <Table.Cell key={x}>{certificate[0].toString()}</Table.Cell>\n                <Table.Cell key={x}>{certificate[2].toString()}</Table.Cell>\n                <Table.Cell>{y}</Table.Cell>\n            </Table.Row>];\n        });\n        return r;\n    }\n\n    //renders the table of certificates\n    renderCertificateTable() {\n        let tableStyle = {\n            width: '38%',\n            margin: '30px auto'\n        };\n\n        if (this.state.certificates && this.state.certificates.length) {\n            return (<Table celled style={tableStyle} color={'blue'} key={'blue'} inverted>\n                    <Table.Header>\n                        <Segment inverted color=\"blue\" style={{textalign: 'center'}}><h2>Certificates</h2></Segment>\n                        <Table.Row>\n                            <Table.HeaderCell> Institution</Table.HeaderCell>\n                            <Table.HeaderCell>Year </Table.HeaderCell>\n                            <Table.HeaderCell>Degree</Table.HeaderCell>\n                            <Table.HeaderCell>Validity</Table.HeaderCell>\n                        </Table.Row>\n                    </Table.Header>\n                    <Table.Body>\n                        {this.renderCertificates()}\n                    </Table.Body>\n                </Table>\n            );\n        } else return null;\n    }\n\n    //renders the jobs of an user in table rows\n    renderJobs() {\n        const x = this.state.accounts[0];\n        let y = 'Unknown';\n        let r = this.state.jobs.map(function (job) {\n            if (job[3] === false && job[4] === false) {\n                y = 'Unknown'\n            } else if (job[3] === true) {\n                y = 'Approved'\n            } else if (job[4] === true) {\n                y = 'Denied'\n            }\n            return [<Table.Row positive={job[3]} negative={!job[3]}>\n                <Table.Cell key={x}>{job[1].toString()}</Table.Cell>\n                <Table.Cell key={x}>{job[0].toString()}</Table.Cell>\n                <Table.Cell key={x}>{job[2].toString()}</Table.Cell>\n                <Table.Cell>{y}</Table.Cell>\n            </Table.Row>];\n        });\n        return r;\n    }\n\n    //renders the table of jobs\n    renderJobsTable() {\n\n        let tableStyle = {\n            width: '38%',\n            margin: '30px auto'\n        };\n\n        if (this.state.jobs && this.state.jobs.length) {\n            return (<Table celled style={tableStyle} color={'blue'} key={'blue'} inverted>\n\n                    <Table.Header>\n                        <Segment inverted color=\"blue\" style={{textalign: 'center'}}><h2>Jobs</h2></Segment>\n                        <Table.Row>\n                            <Table.HeaderCell> Company</Table.HeaderCell>\n                            <Table.HeaderCell>Period Worked</Table.HeaderCell>\n                            <Table.HeaderCell>Position</Table.HeaderCell>\n                            <Table.HeaderCell>Validity</Table.HeaderCell>\n                        </Table.Row>\n                    </Table.Header>\n                    <Table.Body>\n                        {this.renderJobs()}\n                    </Table.Body>\n                </Table>\n            );\n        } else return null;\n    }\n\n    render() {\n        let cardStyle = {\n            width: '15%',\n            margin: '100px auto',\n        };\n\n        return (\n            <div>\n                <div>\n                </div>\n                <Head>\n                    <link\n                        rel=\"stylesheet\"\n                        href=\"//cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.11/semantic.min.css\"\n                    />\n                    <style>{`\n        h1,\n        a {\n          font-family: 'Helvetica';\n        }\n        \n        Card {\n           box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)\n           background-color: #D9499A;\n           }\n         \n        body {\n         background: url(\"https://images.unsplash.com/photo-1511649475669-e288648b2339?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=2089&q=80\");\n         background-repeat: no-repeat;\n         background-position: center; \n         background-attachment: fixed;\n        }\n      `}</style>\n                </Head>\n                {this.state.info === null ? null :\n                    <Card color=\"blue\" style={cardStyle}>\n                        <Card.Content>\n                            <div style={{margin: '2%'}}><h3 style={{margin: '1%'}}>Name:</h3> <h5\n                                style={{margin: '1%'}}> {this.state.info[0].toString()}</h5></div>\n                            <div style={{margin: '2%'}}><h3 style={{margin: '1%'}}>Date of birth:</h3> <h5\n                                style={{margin: '1%'}}>{parseInt(this.state.info[1])}/{parseInt(this.state.info[2])}/{parseInt(this.state.info[3])} </h5>\n                            </div>\n                            <div style={{margin: '2%'}}><h3 style={{margin: '1%'}}>Location:</h3> <h5\n                                style={{margin: '1%'}}> {this.state.info[4].toString()}</h5></div>\n                            <div style={{margin: '2%'}}><h3 style={{margin: '1%'}}>E-mail:</h3> <h5\n                                style={{margin: '1%'}}> {this.state.info[5].toString()}</h5></div>\n                        </Card.Content>\n                    </Card>}\n                {this.renderJobsTable()}\n                {this.renderCertificateTable()}\n                <FixedMenuLayout/>\n            </div>\n        );\n    }\n\n}\n\nexport default ShowInfo"],"mappings":"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","sourceRoot":""}