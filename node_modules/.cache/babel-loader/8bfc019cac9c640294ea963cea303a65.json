{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _toConsumableArray from \"@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/ed/seconddapp/pages/Request.js\";\nimport React, { Component } from 'react';\nimport Head from \"next/head\";\nimport { Button, Card, Container, Form, Message } from \"semantic-ui-react\";\nimport FixedMenuLayout from \"../components/footer\";\nimport instance from \"../components/verifier.js\";\nimport web3 from '../components/web3.js';\n\nvar Requests =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Requests, _Component);\n\n  _createClass(Requests, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.loadBlockchainData();\n    }\n  }, {\n    key: \"loadBlockchainData\",\n    value: function () {\n      var _loadBlockchainData = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var accounts, _y, i, z, v, q, m;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return web3.eth.getAccounts();\n\n              case 2:\n                accounts = _context.sent;\n                _context.t0 = this;\n                _context.next = 6;\n                return instance.methods.isCompany(accounts[0]).call();\n\n              case 6:\n                _context.t1 = _context.sent;\n                _context.t2 = {\n                  isCompany: _context.t1\n                };\n\n                _context.t0.setState.call(_context.t0, _context.t2);\n\n                _context.t3 = this;\n                _context.next = 12;\n                return instance.methods.isInstitution(accounts[0]).call();\n\n              case 12:\n                _context.t4 = _context.sent;\n                _context.t5 = {\n                  isInstitution: _context.t4\n                };\n\n                _context.t3.setState.call(_context.t3, _context.t5);\n\n                if (!(this.state.isCompany === true)) {\n                  _context.next = 30;\n                  break;\n                }\n\n                _context.next = 18;\n                return instance.methods.getJobRequestCount(this.state.address).call();\n\n              case 18:\n                _y = _context.sent;\n                i = 0;\n\n              case 20:\n                if (!(i < _y)) {\n                  _context.next = 28;\n                  break;\n                }\n\n                _context.next = 23;\n                return instance.methods.getJobRequest(i).call();\n\n              case 23:\n                z = _context.sent;\n                this.setState({\n                  jobrequests: [].concat(_toConsumableArray(this.state.jobrequests), [z])\n                });\n\n              case 25:\n                i++;\n                _context.next = 20;\n                break;\n\n              case 28:\n                _context.next = 43;\n                break;\n\n              case 30:\n                if (!(this.state.isInstitution === true)) {\n                  _context.next = 43;\n                  break;\n                }\n\n                _context.next = 33;\n                return instance.methods.getJobRequestCount(this.state.address).call();\n\n              case 33:\n                v = _context.sent;\n                q = 0;\n\n              case 35:\n                if (!(q < v)) {\n                  _context.next = 43;\n                  break;\n                }\n\n                _context.next = 38;\n                return instance.methods.getJobRequest(q).call();\n\n              case 38:\n                m = _context.sent;\n                this.setState({\n                  certrequests: [].concat(_toConsumableArray(this.state.certrequests), [m])\n                });\n\n              case 40:\n                q++;\n                _context.next = 35;\n                break;\n\n              case 43:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function loadBlockchainData() {\n        return _loadBlockchainData.apply(this, arguments);\n      }\n\n      return loadBlockchainData;\n    }()\n  }]);\n\n  function Requests(props) {\n    var _this;\n\n    _classCallCheck(this, Requests);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Requests).call(this, props));\n    _this.state = {\n      jobrequests: [],\n      certrequests: [],\n      isCompany: false,\n      isInstitution: false\n    };\n    return _this;\n  }\n\n  _createClass(Requests, [{\n    key: \"renderJobRequest\",\n    value: function renderJobRequest() {\n      var x = this.state.accounts[0];\n      var r = this.state.jobrequests.map(function (jobrequest) {\n        return [React.createElement(Table.Row, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 50\n          },\n          __self: this\n        }, React.createElement(Table.Cell, {\n          key: x,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 51\n          },\n          __self: this\n        }, jobrequest[2].toString()), React.createElement(Table.Cell, {\n          key: x,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 52\n          },\n          __self: this\n        }, jobrequest[0].toString()), React.createElement(Table.Cell, {\n          key: x,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 53\n          },\n          __self: this\n        }, jobrequest[1].toString()), React.createElement(Table.Cell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 54\n          },\n          __self: this\n        }, y))];\n      });\n      return r;\n    }\n  }, {\n    key: \"renderJobRequestTable\",\n    value: function renderJobRequestTable() {\n      var tableStyle = {\n        width: '38%',\n        margin: '30px auto'\n      };\n\n      if (this.state.jobrequests && this.state.jobrequests.length) {\n        return React.createElement(Table, {\n          celled: true,\n          style: tableStyle,\n          color: 'blue',\n          key: 'blue',\n          inverted: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 69\n          },\n          __self: this\n        }, React.createElement(Table.Header, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 71\n          },\n          __self: this\n        }, React.createElement(Segment, {\n          inverted: true,\n          color: \"blue\",\n          style: {\n            textalign: 'center'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 72\n          },\n          __self: this\n        }, React.createElement(\"h2\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 72\n          },\n          __self: this\n        }, \"Jobs\")), React.createElement(Table.Row, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73\n          },\n          __self: this\n        }, React.createElement(Table.HeaderCell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 74\n          },\n          __self: this\n        }, \" SSN\"), React.createElement(Table.HeaderCell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 75\n          },\n          __self: this\n        }, \"Months Worked\"), React.createElement(Table.HeaderCell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 76\n          },\n          __self: this\n        }, \"Position\"), React.createElement(Table.HeaderCell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 77\n          },\n          __self: this\n        }, \"Eth Address\"))), React.createElement(Table.Body, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 80\n          },\n          __self: this\n        }, this.renderJobRequest()));\n      } else return React.createElement(Card, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, \" \", React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, \"No Requests at the moment\"));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }), React.createElement(Head, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, React.createElement(\"link\", {\n        rel: \"stylesheet\",\n        href: \"//cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.11/semantic.min.css\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }), React.createElement(\"style\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, \"\\n        body {\\n         background: url(\\\"https://images.unsplash.com/photo-1511649475669-e288648b2339?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=2089&q=80\\\");\\n         background-repeat: no-repeat;\\n         background-position: center; \\n         background-attachment: fixed;\\n        }\\n      \")), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, this.renderJobRequestTable()), React.createElement(FixedMenuLayout, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return Requests;\n}(Component);\n\nexport default Requests;","map":{"version":3,"sources":["/home/ed/seconddapp/pages/Request.js"],"names":["React","Component","Head","Button","Card","Container","Form","Message","FixedMenuLayout","instance","web3","Requests","loadBlockchainData","eth","getAccounts","accounts","methods","isCompany","call","setState","isInstitution","state","getJobRequestCount","address","y","i","getJobRequest","z","jobrequests","v","q","m","certrequests","props","x","r","map","jobrequest","toString","tableStyle","width","margin","length","textalign","renderJobRequest","renderJobRequestTable"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport Head from \"next/head\";\nimport {Button, Card, Container, Form, Message} from \"semantic-ui-react\";\nimport FixedMenuLayout from \"../components/footer\";\nimport instance from \"../components/verifier.js\";\nimport web3 from '../components/web3.js';\n\n\nclass Requests extends Component {\n\n    componentDidMount() {\n        this.loadBlockchainData()\n    }\n\n    async loadBlockchainData() {\n        let accounts = await web3.eth.getAccounts();\n        this.setState({isCompany: await instance.methods.isCompany(accounts[0]).call()});\n        this.setState({isInstitution: await instance.methods.isInstitution(accounts[0]).call()});\n        if (this.state.isCompany === true) {\n            const y = await instance.methods.getJobRequestCount(this.state.address).call();\n            for (let i = 0; i < y; i++) {\n                const z = await instance.methods.getJobRequest(i).call();\n                this.setState({jobrequests: [...this.state.jobrequests, z]});\n            }\n        } else if (this.state.isInstitution === true) {\n            const v = await instance.methods.getJobRequestCount(this.state.address).call();\n            for (let q = 0; q < v; q++) {\n                const m = await instance.methods.getJobRequest(q).call();\n                this.setState({certrequests: [...this.state.certrequests, m]});\n            }\n        }\n    }\n\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            jobrequests: [],\n            certrequests: [],\n            isCompany: false,\n            isInstitution: false\n        }\n\n    }\n\n\n    renderJobRequest() {\n        const x = this.state.accounts[0];\n        let r = this.state.jobrequests.map(function (jobrequest) {\n            return [<Table.Row>\n                <Table.Cell key={x}>{jobrequest[2].toString()}</Table.Cell>\n                <Table.Cell key={x}>{jobrequest[0].toString()}</Table.Cell>\n                <Table.Cell key={x}>{jobrequest[1].toString()}</Table.Cell>\n                <Table.Cell>{y}</Table.Cell>\n            </Table.Row>]\n        });\n        return r;\n    }\n\n    renderJobRequestTable() {\n\n        let tableStyle = {\n            width: '38%',\n            margin: '30px auto'\n        };\n\n\n        if (this.state.jobrequests && this.state.jobrequests.length) {\n            return (<Table celled style={tableStyle} color={'blue'} key={'blue'} inverted>\n\n                    <Table.Header>\n                        <Segment inverted color=\"blue\" style={{textalign: 'center'}}><h2>Jobs</h2></Segment>\n                        <Table.Row>\n                            <Table.HeaderCell> SSN</Table.HeaderCell>\n                            <Table.HeaderCell>Months Worked</Table.HeaderCell>\n                            <Table.HeaderCell>Position</Table.HeaderCell>\n                            <Table.HeaderCell>Eth Address</Table.HeaderCell>\n                        </Table.Row>\n                    </Table.Header>\n                    <Table.Body>\n                        {this.renderJobRequest()}\n                    </Table.Body>\n                </Table>\n            );\n        } else return <Card> <h2>No Requests at the moment</h2></Card>\n    }\n\n    render() {\n\n        return (\n            <div>\n                <div></div>\n\n            <Head>\n            <link\n        rel=\"stylesheet\"\n        href=\"//cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.11/semantic.min.css\"\n            />\n            <style>{`\n        body {\n         background: url(\"https://images.unsplash.com/photo-1511649475669-e288648b2339?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=2089&q=80\");\n         background-repeat: no-repeat;\n         background-position: center; \n         background-attachment: fixed;\n        }\n      `}</style>\n    </Head>\n\n                <div>{this.renderJobRequestTable()}</div>\n            <FixedMenuLayout/>\n            </div>\n        );\n\n\n\n    }\n}\n    export\n    default\n    Requests;"]},"metadata":{},"sourceType":"module"}