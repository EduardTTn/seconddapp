{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _toConsumableArray from \"@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/ed/seconddapp/pages/RequestsInstitution.js\";\nimport React, { Component } from 'react';\nimport Head from \"next/head\";\nimport { Button, Card, Container, Form, Icon, Message, Segment, Table } from \"semantic-ui-react\";\nimport FixedMenuLayout from \"../components/footer\";\nimport instance from \"../components/verifier.js\";\nimport web3 from '../components/web3.js';\nimport SimpleSnackbar from '../components/snackbar.js';\n\nvar RequestsInstitution =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(RequestsInstitution, _Component);\n\n  function RequestsInstitution(props) {\n    var _this;\n\n    _classCallCheck(this, RequestsInstitution);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(RequestsInstitution).call(this, props));\n    _this.state = {\n      institutionz: [],\n      accounts: [],\n      loading: false\n    };\n    return _this;\n  }\n\n  _createClass(RequestsInstitution, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.loadBlockchainData();\n    }\n  }, {\n    key: \"loadBlockchainData\",\n    value: function () {\n      var _loadBlockchainData = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var x, i, z;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.t0 = this;\n                _context.next = 3;\n                return web3.eth.getAccounts();\n\n              case 3:\n                _context.t1 = _context.sent;\n                _context.t2 = {\n                  accounts: _context.t1\n                };\n\n                _context.t0.setState.call(_context.t0, _context.t2);\n\n                _context.t3 = this;\n                _context.next = 9;\n                return web3.eth.getAccounts();\n\n              case 9:\n                _context.t4 = _context.sent;\n                _context.t5 = {\n                  accounts: _context.t4\n                };\n\n                _context.t3.setState.call(_context.t3, _context.t5);\n\n                _context.next = 14;\n                return instance.methods.getCertRequestCount(this.state.accounts[0]).call();\n\n              case 14:\n                x = _context.sent;\n                _context.prev = 15;\n                i = 0;\n\n              case 17:\n                if (!(i < x)) {\n                  _context.next = 25;\n                  break;\n                }\n\n                _context.next = 20;\n                return instance.methods.getCertRequest(this.state.accounts[0], i).call();\n\n              case 20:\n                z = _context.sent;\n\n                if (z[5] === false) {\n                  this.setState({\n                    institutionz: [].concat(_toConsumableArray(this.state.institutionz), [z])\n                  });\n                }\n\n              case 22:\n                i++;\n                _context.next = 17;\n                break;\n\n              case 25:\n                _context.next = 30;\n                break;\n\n              case 27:\n                _context.prev = 27;\n                _context.t6 = _context[\"catch\"](15);\n                this.setState({\n                  errorMessage: _context.t6.message\n                });\n\n              case 30:\n                this.setState({\n                  loading: false\n                });\n\n              case 31:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[15, 27]]);\n      }));\n\n      function loadBlockchainData() {\n        return _loadBlockchainData.apply(this, arguments);\n      }\n\n      return loadBlockchainData;\n    }()\n  }, {\n    key: \"renderCertRequests\",\n    value: function renderCertRequests() {\n      var x = this.state.accounts[0];\n      var r = this.state.institutionz.map(function (cert, index) {\n        var _this2 = this;\n\n        return [React.createElement(Table.Row, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 59\n          },\n          __self: this\n        }, React.createElement(Table.Cell, {\n          key: x,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 60\n          },\n          __self: this\n        }, cert[2].toString()), React.createElement(Table.Cell, {\n          key: x,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 61\n          },\n          __self: this\n        }, cert[0].toString()), React.createElement(Table.Cell, {\n          key: x,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 62\n          },\n          __self: this\n        }, cert[1].toString()), React.createElement(Table.Cell, {\n          key: x,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 63\n          },\n          __self: this\n        }, cert[3].toString()), React.createElement(Button, {\n          disabled: this.state.loading,\n          onClick: function onClick(e) {\n            e.preventDefault();\n            instance.methods.approveRequestCertificate(index).send({\n              from: x\n            });\n\n            _this2.setState({\n              loading: true\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 64\n          },\n          __self: this\n        }, React.createElement(Icon, {\n          color: \"black\",\n          name: \"check\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 65\n          },\n          __self: this\n        })), React.createElement(Button, {\n          disabled: this.state.loading,\n          onClick: function onClick(e) {\n            e.preventDefault();\n            instance.methods.denyRequestCertificate(index).send({\n              from: x\n            });\n\n            _this2.setState({\n              loading: true\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 66\n          },\n          __self: this\n        }, React.createElement(Icon, {\n          color: \"black\",\n          name: \"close\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 67\n          },\n          __self: this\n        })))];\n      });\n      return r;\n    }\n  }, {\n    key: \"renderCertRequestsTables\",\n    value: function renderCertRequestsTables() {\n      var tableStyle = {\n        width: '45%',\n        margin: '30px auto'\n      };\n      var cardStyle = {\n        width: '35%',\n        margin: '100px auto'\n      };\n\n      if (this.state.institutionz && this.state.institutionz.length) {\n        return React.createElement(Table, {\n          celled: true,\n          style: tableStyle,\n          color: 'blue',\n          key: 'blue',\n          inverted: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89\n          },\n          __self: this\n        }, React.createElement(Table.Header, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 91\n          },\n          __self: this\n        }, React.createElement(Segment, {\n          inverted: true,\n          color: \"blue\",\n          style: {\n            textalign: 'center'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 92\n          },\n          __self: this\n        }, React.createElement(\"h2\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 92\n          },\n          __self: this\n        }, \"Requests\")), React.createElement(Table.Row, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 93\n          },\n          __self: this\n        }, React.createElement(Table.HeaderCell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94\n          },\n          __self: this\n        }, \" ID\"), React.createElement(Table.HeaderCell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 95\n          },\n          __self: this\n        }, \"Graduation Year\"), React.createElement(Table.HeaderCell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 96\n          },\n          __self: this\n        }, \"Requester\"), React.createElement(Table.HeaderCell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 97\n          },\n          __self: this\n        }, \"Degree\"), React.createElement(Table.HeaderCell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98\n          },\n          __self: this\n        }, \"Validate\"))), React.createElement(Table.Body, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 101\n          },\n          __self: this\n        }, this.renderCertRequests()));\n      } else return React.createElement(\"div\", {\n        style: {\n          margin: '10%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, React.createElement(Card, {\n        style: cardStyle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        style: {\n          margin: '4%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, \"No Requests registered at the moment.\")));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      console.log('address:', this.state.accounts[0]);\n      console.log('company:', this.state.loading);\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }), React.createElement(Head, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, React.createElement(\"link\", {\n        rel: \"stylesheet\",\n        href: \"//cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.11/semantic.min.css\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }), React.createElement(\"style\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, \"\\n        body {\\n         background: url(\\\"https://images.unsplash.com/photo-1511649475669-e288648b2339?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=2089&q=80\\\");\\n         background-repeat: no-repeat;\\n         background-position: center; \\n         background-attachment: fixed;\\n        }\\n         \\n        Card {\\n           box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)\\n     \\n           }\\n           \\n      \")), React.createElement(\"div\", {\n        style: {\n          margin: '150px auto'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, this.renderCertRequestsTables()), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, this.state.loading === true ? React.createElement(SimpleSnackbar, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }) : null), React.createElement(FixedMenuLayout, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return RequestsInstitution;\n}(Component);\n\nexport default RequestsInstitution;","map":{"version":3,"sources":["/home/ed/seconddapp/pages/RequestsInstitution.js"],"names":["React","Component","Head","Button","Card","Container","Form","Icon","Message","Segment","Table","FixedMenuLayout","instance","web3","SimpleSnackbar","RequestsInstitution","props","state","institutionz","accounts","loading","loadBlockchainData","eth","getAccounts","setState","methods","getCertRequestCount","call","x","i","getCertRequest","z","errorMessage","message","r","map","cert","index","toString","e","preventDefault","approveRequestCertificate","send","from","denyRequestCertificate","tableStyle","width","margin","cardStyle","length","textalign","renderCertRequests","console","log","renderCertRequestsTables"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport Head from \"next/head\";\nimport {Button, Card, Container, Form, Icon, Message, Segment, Table} from \"semantic-ui-react\";\nimport FixedMenuLayout from \"../components/footer\";\nimport instance from \"../components/verifier.js\";\nimport web3 from '../components/web3.js';\nimport SimpleSnackbar from '../components/snackbar.js'\n\n\nclass RequestsInstitution extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            institutionz: [],\n            accounts: [],\n            loading: false\n        };\n\n\n    }\n\n    componentDidMount() {\n        this.loadBlockchainData()\n    }\n\n    async loadBlockchainData() {\n        this.setState({accounts: await web3.eth.getAccounts()});\n        this.setState({accounts: await web3.eth.getAccounts()});\n        const x = await instance.methods.getCertRequestCount(this.state.accounts[0]).call();\n\n        try {\n            for (let i = 0; i < x; i++) {\n                let z = await instance.methods.getCertRequest(this.state.accounts[0], i).call();\n                if (z[5] === false){\n                    this.setState({institutionz: [...this.state.institutionz, z]});\n                }\n\n            }\n        } catch (err) {\n            this.setState({errorMessage: err.message});\n        }\n        this.setState({loading: false});\n    }\n\n\n\n\n\n\n    renderCertRequests()\n    {\n\n\n        const x = this.state.accounts[0];\n\n        let r = this.state.institutionz.map(function (cert, index) {\n\n            return [<Table.Row>\n                <Table.Cell key={x}>{cert[2].toString()}</Table.Cell>\n                <Table.Cell key={x}>{cert[0].toString()}</Table.Cell>\n                <Table.Cell key={x}>{cert[1].toString()}</Table.Cell>\n                <Table.Cell key={x}>{cert[3].toString()}</Table.Cell>\n                <Button disabled={this.state.loading} onClick={(e) => {\n                    e.preventDefault();instance.methods.approveRequestCertificate(index).send({from: x}); this.setState({loading: true});}}><Icon color='black' name='check'/></Button>\n                < Button disabled={this.state.loading} onClick={(e) => {\n                    e.preventDefault();instance.methods.denyRequestCertificate(index).send({from: x}); this.setState({loading: true});}}><Icon color='black' name='close'/></Button>\n\n            </Table.Row>];\n        });\n\n        return r;\n    }\n\n    renderCertRequestsTables()\n    {\n\n        let tableStyle = {\n            width: '45%',\n            margin: '30px auto'\n        };\n\n        let cardStyle = {\n            width: '35%',\n            margin: '100px auto',\n        };\n\n        if (this.state.institutionz && this.state.institutionz.length) {\n            return (<Table celled style={tableStyle} color={'blue'} key={'blue'} inverted>\n\n                    <Table.Header>\n                        <Segment inverted color=\"blue\" style={{textalign: 'center'}}><h2>Requests</h2></Segment>\n                        <Table.Row>\n                            <Table.HeaderCell> ID</Table.HeaderCell>\n                            <Table.HeaderCell>Graduation Year</Table.HeaderCell>\n                            <Table.HeaderCell>Requester</Table.HeaderCell>\n                            <Table.HeaderCell>Degree</Table.HeaderCell>\n                            <Table.HeaderCell>Validate</Table.HeaderCell>\n                        </Table.Row>\n                    </Table.Header>\n                    <Table.Body>\n                        {this.renderCertRequests()}\n\n\n                    </Table.Body>\n                </Table>\n            );\n        } else return <div style={{margin: '10%'}}><Card style={cardStyle}><h2 style={{margin:'4%'}}>No Requests registered at the moment.</h2></Card></div>;\n    }\n\n\n    render()\n    {\n        console.log('address:', this.state.accounts[0]);\n        console.log('company:', this.state.loading);\n        return (\n            <div>\n                <div></div>\n\n                <Head>\n                    <link\n                        rel=\"stylesheet\"\n                        href=\"//cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.11/semantic.min.css\"\n                    />\n                    <style>{`\n        body {\n         background: url(\"https://images.unsplash.com/photo-1511649475669-e288648b2339?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=2089&q=80\");\n         background-repeat: no-repeat;\n         background-position: center; \n         background-attachment: fixed;\n        }\n         \n        Card {\n           box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)\n     \n           }\n           \n      `}</style>\n                </Head>\n\n                <div style={{margin: '150px auto'}}>{this.renderCertRequestsTables()}</div>\n                <div>{this.state.loading === true ? <SimpleSnackbar/> : null}</div>\n                <FixedMenuLayout/>\n            </div>\n        );\n\n\n    }\n}\n\nexport\ndefault\nRequestsInstitution;"]},"metadata":{},"sourceType":"module"}